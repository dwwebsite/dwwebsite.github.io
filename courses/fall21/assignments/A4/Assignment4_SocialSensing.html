<style type="text/css">
pre {
        background: #ccccff;
        border: 1px solid black;
        padding: 10px 10px 10px 10px;
        font: courier;
        white-space: pre;
}
</style>

<html>
<head>
  <title>Assignment 3: Truth Discovery and Credibility Analysis</title>
</head>

<a href=../../index.html>CSE 40437/60437</a>  / <a href=./Assignment3_SocialSensing.html>A3</a>
<hr>

<body>
<h2>Assignment 3: Truth Discovery and Credibility Analysis</h2>
Twitter creates an open online data-sharing platform that allows average people to broadcast their real-time data at an unprecedented scale. However, tweets can be biased, noisy, outdated, incorrect, and thus, misleading and unreliable. Considering the massive amount of tweets and active Twitter users, it is very challenging to accurately ascertain both the <i> correctness </i> of each tweet and the <i> reliability </i> of each Twitter user.  We call this challenge <b> Truth Discovery. </b> 

<!--
Furthermore, unlike well-tested infrastructure sensors, human sources are not reliable and most of Twitter users are actually unvetted. Tweets are short (i.e., a maximum of 140 characters per tweet) and contain very limited amount of information to be self-evident. Truth discovery is an emerging topic in social sensing and has been actively studied in several research communities (e.g., networked sensing, data mining). -->

<p>
In this assignment, you will learn how to use the maximum likelihood estimation  (MLE) approach to solve the truth discovery problem on Twitter and analyze the credibility of tweets from a real-world case study. 


<h2>Objectives:</h2>

<dir>
<li> Learn how to use the maximum likelihood estimation (MLE) approach to solve the truth discovery problem
<li> Build an MLE based tweet credibility analysis tool using Expectation Maximization to analyze the credibility of reported tweets.
</dir>


<h2>Truth Discovery as an MLE Problem:</h2>

To formulate the truth discovery problem in social sensing in a manner amenable to rigorous optimization, we consider a group of M sources, namely, S<sub>1</sub>, S<sub>2</sub>,...,S<sub>M</sub>, who make individual observations about a
set of N measured variables*, C<sub>1</sub>, C<sub>2</sub>,...,C<sub>N</sub>. In this assignment, we consider sources as
the Twitter users who report tweets during the observation period. Measured variables are represented by the clusters of tweets (e.g., the clusters you generated in Assignment 2), which represent observations about the same topic of an event.

<p>
* The measured variables are essentially the same concept as the term "claims" used in the literature.

<p>
In this assignment, we focus on the case of binary measured variables because the states of the physical environment in many applications can be represented by a set of statements that are either true or false. For example, "the bridge fell down", "the building is on fire" can be seen as a binary variable that is true if the statement is correct and false otherwise. Without loss of generality, we assume that "normal" state of each measured variable is negative (e.g., the bridge did not fall down and the building is not on fire). Hence, we assume that sources report only when a positive value of a measured variable is encountered.

<p>
The social sensing data we observed can be compactly represented by a <b>Sensing Matrix</b> <i> SC,</i> 
i.e., S<sub>i</sub>C<sub>j</sub>=1 indicates that S<sub>i</sub> reports C<sub>j</sub> to be true, and S<sub>i</sub>C<sub>j</sub>=0 otherwise. The truth discovery problem in social sensing can be formulated as <b> a maximum likelihood estimation problem: </b> given the observed data (i.e., Sensing Matrix SC), what is the likelihood of a source to make a correct observation and what is the correct state of each measured variable?

<p>
Here we give some specific definitions of the terms that will be used in the truth discovery problem formulation: 
<dir>
<li> <i> P(C<sub>j</sub>=1) </i> denotes the probability that the measured variable C<sub>j</sub> is true
<li> <i> s<sub>i</sub> </i> denotes the probability that source S<sub>i</sub> reports an observation of a measured variable. It can be computed as the fraction of measured variables reported by S<sub>i</sub> over the total number of measured variables.
<li> <i> d  </i> denotes that the probability that a randomly chosen measured variable is true.
<li> <i> t<sub>i</sub> </i> denotes the source reliability, which is often not known a priori.  Formally, it is defined as:<br>
<tt><img src="ti.png"width="220" height="30"></tt>
<li> <i> a<sub>i</sub> </i> denotes the (unknown) probability that source S<sub>i</sub> reports a measured variable to be true when it is indeed true. Formally, it is defined as:<br>
<tt><img src="ai.png"width="220" height="30"></tt>
<li> <i> b<sub>i</sub> </i> denotes the (unknown) probability that source S<sub>i</sub> reports a measured variable to be true when it is in indeed false. Formally, it is defined as:<br>
<tt><img src="bi.png"width="220" height="30"></tt>
</dir>

From the definition of <i> s<sub>i</sub>, t<sub>i</sub>, a<sub>i</sub>, b<sub>i</sub> </i> and <i> d </i>, we can determine their relationship (using the Bayes' theorem) as follows:<br>
<tt><img src="relationship.png"width="180" height="110"></tt>

<p> Using the above terms, the truth discovery problem in social sensing is to jointly estimate the <i> source reliability (i.e., t<sub>i</sub> </i>) </i> and <i> correctness of each measured variable (i.e., P(C<sub>j</sub>=1)) </i>without knowing either of them  a priori. 

<p>
For more details about how to formulate and solve the truth discovery problem, please read the <a href=./ipsn12.pdf><b> IPSN12 Research Paper</b></a>.


<h2>Introduction to Expectation-Maximization Algorithm (EM):</h2>

Expectation-Maximization (EM) algorithm is a widely used optimization technique to solve the maximum likelihood estimation problem (e.g., the one we formulated above). 
Intuitively, what the EM algorithm generally does is to iteratively estimate the values of the unknown parameters of a model and the values of the latent variables, which are not directly observable from the data. This iterative process continues until the estimated results converge. To apply the EM (Expectation-Maximization) algorithm 
to solve a maximum likelihood estimation (MLE) problem, we need to define a likelihood function <tt><img src="likelihood_function.png"width="160" height="25"></tt>,
where <tt><img src="theta.png"width="20" height="20"></tt> is the estimation parameter of the model, X is the observed data and Z is the set of latent variables.

The EM algorithm finds the maximum likelihood estimate of <tt><img src="theta.png"width="20" height="20"></tt> and values of Z by iteratively performing two key steps:
<dir>
<li> <b>E-step</b>: Compute the expected log likelihood function where the expectation is taken with respect to the computed conditional distribution of the latent variables given the current settings and observed data. <br><br>
<tt><img src="E-step.png"width="280" height="50"></tt>
<li> <b>M-step</b>: Find the parameters that maximize the Q function in the E-step to be used as the estimate of <tt><img src="theta.png"width="20" height="20"></tt>
for the next iteration. <br><br>
<tt><img src="M-step.png"width="250" height="50"></tt>
</dir>

<p>
Here is the reference for more details about EM algorithm <a href=http://en.wikipedia.org/wiki/Expectation%E2%80%93maximization_algorithm>http://en.wikipedia.org/</a>.

<p>
<b> Note: </b> The pseudocode of the EM algorithm to solve the truth discovery problem is presented as Algorithm 1 (Section 4.4) of <a href=./ipsn12.pdf><b> IPSN12 Research Paper</b></a>. 

<!-- <h2>Applying EM algorithm to Solve Truth Discovery Problem:</h2> -->



<h2>The Assignment:</h2>
<ol type="I">
<li> <b>Synthetic Case Study</b>:<br><br>
In this part, you will develop a maximum likelihood estimator using Expectation Maximization to solve the truth discovery problem in social sensing and evaluate the performance of the estimator using synthetic datasets.

<p>
<b>Task 1</b> :<br>
Your estimator should take the Sensing Matrix file as the input and output the result file that contains the estimates	 of the correctness of measured variables. Recall that the Sensing Matrix describes the relationships between sources and measured variables. In particular, each line of the Sensing Matrix file is in the format of <i>"source id, measured variable id"</i> if a source reports an observation about a particular measured variable (i.e.,  S<sub>i</sub>C<sub>j</sub>=1). Please note that if a "S<sub>i</sub>, C<sub>j</sub>" pair does not appear in the Sensing Matrix file, it means  S<sub>i</sub>C<sub>j</sub>=0 in the Sensing Matrix. Please use this <a href='./Simulation_Data/SC_Submit/SCMatrix_Submit'> <b> Sensing Matrix File </b> </a> to generate your output result files.

<p> <b> Hint: </b> Regarding the convergence of the algorithm in this assignment, your estimator can (i) check the difference of the estimation parameter values in two consecutive iterations and decide to stop if the difference is smaller than a heuristic threshold; OR (ii) run a fixed number of iterations (e.g., 15 to 20 rounds) of the algorithm and then stop.

<p>
In addition, we provide you with some test input files for you to run some basic tests of your code. <b> So please do not turn in results based on these test files.</b> Meanwhile, you are encouraged to write a simple program to generate different Sensing Matrix files (where you control the ground truth) and test your code more extensively.

<ol>
<li> Here are three test Sensing Matrix files: <a href='./Simulation_Data/SC_Test/SCMatrix_Test1'>Test Sensing Matrix File1</a>, <a href='./Simulation_Data/SC_Test/SCMatrix_Test2'>Test Sensing Matrix File 2</a>, <a href='./Simulation_Data/SC_Test/SCMatrix_Test3'>Test Sensing Matrix File 3</a>. Your estimator should do <i> perfect </i> classification of all the measured variables (i.e., zero false positives and zero false negatives).


<li> A Ground Truth file that contains the ground truth value of each measured variable (i.e., whether the variable is true or false). In particular, each line of the Ground Truth File is in the format of <i>"measured variable id, correctness indicator"</i>, where the correctness indicator indicates whether a measured variable is true or false: 1 means true and 0 means false. Here is the <a href='./GroundTruth/GroundTruth_File'>Ground Truth File</a>.
</ol>

<p>
<b>What to Turn In</b> :<br>
<ol type="1">

<!--	
<li> A file that contains the estimation results of the reliability (i.e., t<sub>i</sub>) of each source. In this result file, each line should be in this format: <i>"source ID, reliability</i>". The IDs of sources should be consistent with the ones specified in the <a href='./Simulation_Data/SC_Submit/SCMatrix_1'> <b> Sensing Matrix File </b> </a>. (<b>Note:</b> Make sure you do not submit the results from Testing Sensing Matrix File.) <br>
-->

<li> A file that contains the estimation results of whether each measured variable is true or not. Since the variable is assumed to be binary, C<sub>j</sub> is true if P(C<sub>j</sub>=1)>=0.5 and false otherwise. In the result file, each line should be in this format: <i>"measured variable ID, 1 or 0" </i>, where 1 indicates the variable is true and 0 indicates it is false. The IDs of measured variables should be consistent with the ones specified in the <a href='./Simulation_Data/SC_Submit/SCMatrix_Submit'> <b> Sensing Matrix File</b> </a>. <br>

<li> The source code of your estimator to finish this task.
</ol>


<p>
<li> <b>Real World Case Study</b>: <br> <br>
In this part, you will test your MLE estimator using a real world Twitter dataset. In particular, you need to construct the Sensing Matrix using the clustering results of Assignment 2 and then apply the MLE estimator on the Sensing Matrix to estimate the credibility of tweets. (<b>Hint:</b> You can take Twitter users as sources and clusters of tweets as measured variables in this case.) 

<p>
<b>Task 2</b> :<br>
Generate the Sensing Matrix using the same Twitter Dataset of Assignment 2 <a href='./Realworld_Data/Tweets.txt'> <b> Twitter Dataset Download </b> </a> and the <a href='./Realworld_Data/Cluster_Result_Tweetsid.txt'>  <b> Clustering Results File.</b></a>    Apply your MLE estimator to the generated Sensing Matrix to analyze the credibility of tweets. <br>
<b> Note: </b> Please set the initial value of <i> d </i> to 0.5 to generate the results of this task.

<p>
<b>What to Turn In</b> :<br>
(1) A file that contains all clusters ranked by their credibility scores (i.e., P(C<sub>j</sub>)) from high to low. For each cluster, output the cluster ID (be consistent with the format of<a href='./Realworld_Data/Cluster_Result_Tweetsid.txt'>  <b> Clustering Results File</b></a>) and the credibility score of that cluster. <br>
(2) The source code to finish the above task.
	
</ol>

<b>Notes:</b> 
<dir>
<li> Please submit a README file about how to run your source code.
<li> Please specify your Python version in your Readme file if your code is written a version different from Python 3.5.
</dir>

<h2>Where to Turn In:</h2>
Your dropbox directory is:<br>
<p>
~/esc-courses/sp20-cse-40437.01/dropbox/your_netid/A3


<h2>Deadline:</h2>
<b> This assignment is due at at the beginning of class on Wed, March 4th. </b>

<br><br>


<h2>Grading Rubric</h2>
It is available on <a href=https://sakailogin.nd.edu/portal/site/SP20-CSE-40437-CX-01/tool/0a324e46-a5af-4109-896d-8c3949b8d947?panel=Main
><b>Sakai/Resources/Assignments</b></a>. <br>



</body>
</html>
